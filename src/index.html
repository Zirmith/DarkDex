<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkDex</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="lugia-container">
                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/showdown/249.gif" alt="Shadow Lugia" class="splash-lugia" id="splash-lugia">
                <div class="shadow-aura"></div>
            </div>
            <h1 class="splash-title">DarkDex</h1>
            <p class="splash-subtitle">Shadow Pokédex</p>
            <div class="loading-status">
                <p id="loading-status-text">Initializing Shadow Database...</p>
                <div class="loading-details">
                    <div class="loading-step" id="step-connection">
                        <i class="ri-wifi-line"></i>
                        <span>Checking Connection</span>
                        <div class="step-status pending"></div>
                    </div>
                    <div class="loading-step" id="step-pokemon">
                        <i class="ri-ghost-2-line"></i>
                        <span>Loading Pokemon Data</span>
                        <div class="step-status pending"></div>
                    </div>
                    <div class="loading-step" id="step-sprites">
                        <i class="ri-image-line"></i>
                        <span>Preparing Sprites</span>
                        <div class="step-status pending"></div>
                    </div>
                    <div class="loading-step" id="step-complete">
                        <i class="ri-check-line"></i>
                        <span>Ready to Explore</span>
                        <div class="step-status pending"></div>
                    </div>
                </div>
            </div>
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
            <div class="particles"></div>
        </div>
    </div>

    <!-- Custom Title Bar -->
    <div class="title-bar">
        <div class="title-bar-left">
            <div class="app-icon">
                <div class="shadow-pokeball">
                    <div class="pokeball-top"></div>
                    <div class="pokeball-middle">
                        <div class="pokeball-center">
                            <div class="lugia-symbol">⚡</div>
                        </div>
                    </div>
                    <div class="pokeball-bottom"></div>
                </div>
            </div>
            <span class="app-title">DarkDex</span>
        </div>
        <div class="title-bar-center">
            <div class="search-container">
                <i class="ri-search-line search-icon"></i>
                <input type="text" id="search-input" placeholder="Search Pokémon by name or ID...">
                <button id="clear-search" class="clear-btn"><i class="ri-close-line"></i></button>
            </div>
        </div>
        <div class="title-bar-right">
            <div class="connection-status" id="connection-status">
                <i class="ri-wifi-line" title="Online"></i>
            </div>
            <button id="minimize-btn" class="title-btn" title="Minimize">
                <i class="ri-subtract-line"></i>
            </button>
            <button id="maximize-btn" class="title-btn" title="Maximize">
                <i class="ri-checkbox-blank-line"></i>
            </button>
            <button id="close-btn" class="title-btn close" title="Close">
                <i class="ri-close-line"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-container" id="main-container" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="filters-section">
                <h3><i class="ri-filter-3-line"></i> Shadow Filters</h3>
                
                <div class="filter-group">
                    <label>Generation</label>
                    <select id="generation-filter">
                        <option value="">All Generations</option>
                        <option value="1">Generation I</option>
                        <option value="2">Generation II</option>
                        <option value="3">Generation III</option>
                        <option value="4">Generation IV</option>
                        <option value="5">Generation V</option>
                        <option value="6">Generation VI</option>
                        <option value="7">Generation VII</option>
                        <option value="8">Generation VIII</option>
                        <option value="9">Generation IX</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Type</label>
                    <div class="type-filters" id="type-filters">
                        <button class="type-filter normal" data-type="normal">Normal</button>
                        <button class="type-filter fire" data-type="fire">Fire</button>
                        <button class="type-filter water" data-type="water">Water</button>
                        <button class="type-filter electric" data-type="electric">Electric</button>
                        <button class="type-filter grass" data-type="grass">Grass</button>
                        <button class="type-filter ice" data-type="ice">Ice</button>
                        <button class="type-filter fighting" data-type="fighting">Fighting</button>
                        <button class="type-filter poison" data-type="poison">Poison</button>
                        <button class="type-filter ground" data-type="ground">Ground</button>
                        <button class="type-filter flying" data-type="flying">Flying</button>
                        <button class="type-filter psychic" data-type="psychic">Psychic</button>
                        <button class="type-filter bug" data-type="bug">Bug</button>
                        <button class="type-filter rock" data-type="rock">Rock</button>
                        <button class="type-filter ghost" data-type="ghost">Ghost</button>
                        <button class="type-filter dragon" data-type="dragon">Dragon</button>
                        <button class="type-filter dark" data-type="dark">Dark</button>
                        <button class="type-filter steel" data-type="steel">Steel</button>
                        <button class="type-filter fairy" data-type="fairy">Fairy</button>
                    </div>
                </div>

                <div class="filter-group">
                    <label>Sort By</label>
                    <select id="sort-filter">
                        <option value="id">National Dex</option>
                        <option value="name">Name</option>
                        <option value="base-stat-total">Base Stat Total</option>
                        <option value="height">Height</option>
                        <option value="weight">Weight</option>
                    </select>
                </div>

                <div class="filter-actions">
                    <button id="clear-filters" class="btn-secondary">
                        <i class="ri-refresh-line"></i> Reset Filters
                    </button>
                    <button id="cache-management" class="btn-secondary" style="margin-top: 8px;">
                        <i class="ri-database-2-line"></i> Cache Management
                    </button>
                </div>
            </div>

            <div class="sprite-controls">
                <h3><i class="ri-ghost-line"></i> Shadow Sprites</h3>
                <div class="sprite-toggles">
                    <label class="toggle-switch">
                        <input type="checkbox" id="animated-sprites">
                        <span class="slider"></span>
                        Animated Sprites
                    </label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="shiny-sprites">
                        <span class="slider"></span>
                        Shiny Variants
                    </label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="showdown-sprites">
                        <span class="slider"></span>
                        Showdown Style
                    </label>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <!-- Loading Screen -->
            <div id="loading-screen" class="loading-screen">
                <div class="loading-spinner">
                    <i class="ri-loader-4-line"></i>
                </div>
                <p>Loading DarkDex...</p>
            </div>

            <!-- Pokemon Grid -->
            <div id="pokemon-grid" class="pokemon-grid" style="display: none;">
                <!-- Pokemon cards will be inserted here -->
            </div>

            <!-- Pokemon Detail Modal -->
            <div id="pokemon-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modal-pokemon-name">Pokémon Name</h2>
                        <button id="close-modal" class="close-modal">
                            <i class="ri-close-line"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <div class="pokemon-detail-tabs">
                            <button class="tab-btn active" data-tab="overview">Overview</button>
                            <button class="tab-btn" data-tab="stats">Stats</button>
                            <button class="tab-btn" data-tab="moves">Moves</button>
                            <button class="tab-btn" data-tab="evolution">Evolution</button>
                            <button class="tab-btn" data-tab="forms">Forms</button>
                            <button class="tab-btn" data-tab="locations">Locations</button>
                        </div>

                        <div class="tab-content" id="tab-overview">
                            <div class="pokemon-overview">
                                <div class="pokemon-image-section">
                                    <div class="sprite-container">
                                        <img id="modal-pokemon-sprite" src="" alt="Pokemon Sprite">
                                    </div>
                                    <div class="sprite-controls-modal">
                                        <button id="toggle-sprite-type" class="btn-secondary">Regular</button>
                                        <button id="toggle-sprite-style" class="btn-secondary">Static</button>
                                        <button id="play-pokemon-cry" class="btn-secondary">
                                            <i class="ri-volume-up-line"></i> Play Cry
                                        </button>
                                    </div>
                                </div>
                                <div class="pokemon-info">
                                    <div class="basic-info">
                                        <p><strong>National Dex:</strong> <span id="modal-pokemon-id"></span></p>
                                        <p><strong>Height:</strong> <span id="modal-pokemon-height"></span></p>
                                        <p><strong>Weight:</strong> <span id="modal-pokemon-weight"></span></p>
                                        <p><strong>Base Experience:</strong> <span id="modal-pokemon-experience"></span></p>
                                    </div>
                                    <div class="types-section">
                                        <strong>Types:</strong>
                                        <div id="modal-pokemon-types" class="types-container"></div>
                                    </div>
                                    <div class="abilities-section">
                                        <strong>Abilities:</strong>
                                        <div id="modal-pokemon-abilities"></div>
                                    </div>
                                    <div class="description-section">
                                        <strong>Description:</strong>
                                        <p id="modal-pokemon-description">Loading description...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-stats" style="display: none;">
                            <div class="stats-container" id="modal-pokemon-stats"></div>
                        </div>

                        <div class="tab-content" id="tab-moves" style="display: none;">
                            <div class="moves-container" id="modal-pokemon-moves">
                                <div class="moves-loading">Loading moves...</div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-evolution" style="display: none;">
                            <div class="evolution-container" id="modal-pokemon-evolution">
                                <div class="evolution-loading">Loading evolution chain...</div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-forms" style="display: none;">
                            <div class="forms-container" id="modal-pokemon-forms">
                                <div class="forms-loading">Loading forms...</div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-locations" style="display: none;">
                            <div class="locations-container" id="modal-pokemon-locations">
                                <div class="locations-loading">Loading locations...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cache Management Modal -->
    <div id="cache-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>Cache Management</h2>
                <button id="close-cache-modal" class="close-modal">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="modal-body">
              <!-- Cache Management Tabs -->
<div class="cache-tabs">
    <button id="cache-btn-statistics" class="cache-tab-btn active" data-cache-tab="statistics">
        <i class="ri-bar-chart-line"></i> Statistics
    </button>
    <button id="cache-btn-actions" class="cache-tab-btn" data-cache-tab="actions">
        <i class="ri-settings-3-line"></i> Actions
    </button>
    <button id="cache-btn-failed" class="cache-tab-btn" data-cache-tab="failed">
        <i class="ri-error-warning-line"></i> Failed Downloads
        <span class="failed-badge" id="failed-badge" style="display: none;">0</span>
    </button>
</div>
              <!-- Statistics Tab -->
<div class="cache-tab-content active" id="cache-tab-statistics">
    <div class="cache-stats" id="cache-stats">
        <div class="loading-spinner">
            <i class="ri-loader-4-line"></i>
        </div>
        <p>Loading cache statistics...</p>
    </div>
</div>

<!-- Actions Tab -->
<div class="cache-tab-content" id="cache-tab-actions">
    <div class="cache-actions" id="cache-actions">
        <div class="cache-action-group">
            <h4><i class="ri-delete-bin-line"></i> Clear Cache</h4>
            <p class="cache-action-description">
                Clear cached data to free up disk space. This will require re-downloading content when accessed again.
            </p>
            <div class="cache-buttons">
                <button id="clear-data-cache" class="btn-secondary">
                    <i class="ri-database-line"></i> Clear Data Cache
                </button>
                <button id="clear-sprite-cache" class="btn-secondary">
                    <i class="ri-image-line"></i> Clear Sprite Cache
                </button>
                <button id="clear-audio-cache" class="btn-secondary">
                    <i class="ri-volume-up-line"></i> Clear Audio Cache
                </button>
            </div>
            <div class="cache-danger-zone">
                <h5><i class="ri-alert-line"></i> Danger Zone</h5>
                <p>This action will clear all cached data and cannot be undone.</p>
                <button id="clear-all-cache" class="btn-danger">
                    <i class="ri-delete-bin-line"></i> Clear All Cache
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Failed Downloads Tab -->
<div class="cache-tab-content" id="cache-tab-failed">
    <div class="failed-downloads-section" id="failed-downloads-section">
        <div class="failed-downloads-header">
            <h4><i class="ri-error-warning-line"></i> Failed Downloads</h4>
            <p class="failed-downloads-description">
                These items failed to download and can be retried. Failed downloads occur when there are network issues, 
                server problems, or missing resources.
            </p>
        </div>
        <div class="failed-downloads-stats" id="failed-downloads-stats">
            <div class="failed-stat-item">
                <i class="ri-ghost-2-line"></i>
                <span class="failed-stat-label">Pokémon Data</span>
                <span class="failed-stat-count" id="failed-pokemon-count">0</span>
            </div>
            <div class="failed-stat-item">
                <i class="ri-image-line"></i>
                <span class="failed-stat-label">Sprites</span>
                <span class="failed-stat-count" id="failed-sprites-count">0</span>
            </div>
            <div class="failed-stat-item">
                <i class="ri-volume-up-line"></i>
                <span class="failed-stat-label">Audio</span>
                <span class="failed-stat-count" id="failed-audio-count">0</span>
            </div>
        </div>
        <div class="failed-downloads-list" id="failed-downloads-list">
            <!-- Failed downloads will be populated here -->
        </div>
        <div class="failed-downloads-actions">
            <button id="retry-all-failed" class="btn-secondary">
                <i class="ri-refresh-line"></i> Retry All Failed
            </button>
            <button id="clear-failed-list" class="btn-secondary">
                <i class="ri-delete-bin-line"></i> Clear Failed List
            </button>
        </div>
    </div>
</div>
            </div>
        </div>
    </div>


    <script>
        function setupCacheTabSwitching() {
    const statisticsBtn = document.getElementById('cache-btn-statistics');
    const actionsBtn = document.getElementById('cache-btn-actions');
    const failedBtn = document.getElementById('cache-btn-failed');

    const statisticsContent = document.getElementById('cache-tab-statistics');
    const actionsContent = document.getElementById('cache-tab-actions');
    const failedContent = document.getElementById('cache-tab-failed');

    const hideAllTabs = () => {
        [statisticsBtn, actionsBtn, failedBtn].forEach(btn => btn.classList.remove('active'));
        [statisticsContent, actionsContent, failedContent].forEach(content => {
            content.classList.remove('active');
            content.style.opacity = '0';
        });
    };

    // Statistics tab click
    statisticsBtn.addEventListener('click', () => {
        hideAllTabs();
        statisticsBtn.classList.add('active');
        statisticsContent.classList.add('active');
        setTimeout(() => statisticsContent.style.opacity = '1', 50);
        this.loadCacheStatistics();
    });

    // Actions tab click
    actionsBtn.addEventListener('click', () => {
        hideAllTabs();
        actionsBtn.classList.add('active');
        actionsContent.classList.add('active');
        setTimeout(() => actionsContent.style.opacity = '1', 50);
        // No extra load method here unless you add one
    });

    // Failed tab click
    failedBtn.addEventListener('click', () => {
        hideAllTabs();
        failedBtn.classList.add('active');
        failedContent.classList.add('active');
        setTimeout(() => failedContent.style.opacity = '1', 50);
        this.loadFailedDownloads();
    });
}

setupCacheTabSwitching();
    </script>


    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="sprites.js"></script>
    <script src="search.js"></script>
    <script src="audio.js"></script>
    <script src="renderer.js"></script>
</body>
</html>
